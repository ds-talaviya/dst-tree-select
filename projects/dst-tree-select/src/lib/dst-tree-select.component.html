<div class="dropdown" [class.open]="dropdownOpen">
    <div class="chip-input" (click)="toggleDropdown()">
        <div class="chip-select-container">
            <div class="chip-value-container">
                <ng-container *ngIf="selectedItems.length > 0; else placeholder">
                    <ng-container *ngFor="let item of selectedItems" class="">
                        <div class="chip-value">
                            <span class="chip-value-label">{{ item.Name | titlecase}}</span>
                            <span class="chip-value-icon" (click)="removeItem(item);$event.stopPropagation()">×</span>
                        </div>
                    </ng-container>
                </ng-container>

                <ng-template #placeholder>
                    <div role="combobox" class="chip-input">
                        <input type="text" autocorrect="off" autocapitalize="off" placeholder="Select Sub Manager">
                    </div>
                </ng-template>
            </div>
            <div class="chip-clear-wrapper" title="Clear all" (click)="removeAll();$event.stopPropagation()"
                *ngIf="selectedItems.length > 0">
                <span class=" chip-clear">×</span>
            </div>
            <div class="chip-arrow-wrapper">
                <span class="chip-arrow"></span>
            </div>
        </div>
    </div>

    <div role="menu" class="dropdown-menu" *ngIf="dropdownOpen" (click)="$event.stopPropagation()">
        <ng-container *ngTemplateOutlet="recursiveCheckbox; context: { $implicit: data, level: 0 }"></ng-container>

        <ng-template #recursiveCheckbox let-SubManagers let-level="level">
            <div *ngFor="let item of SubManagers; let i = index">
                <a href="javascript:;" class="dropdown-item" [ngStyle]="{'padding-left': (level * 15) + 10 + 'px'}">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" [id]="'checkbox' + item.Id"
                            [checked]="item.checked" (change)="handleCheckboxChange(item, $event)">
                        <label class="custom-control-label" [for]="'checkbox' + item.Id">
                            {{ item.Name | titlecase }}
                        </label>
                    </div>
                </a>
                <ng-container *ngIf="item.SubManagers?.length">
                    <ng-container
                        *ngTemplateOutlet="recursiveCheckbox; context: { $implicit: item.SubManagers, level: level + 1 }">
                    </ng-container>
                </ng-container>
            </div>
        </ng-template>
    </div>
</div>